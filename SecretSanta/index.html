<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark">
  <title>La Grande ‚ÄúC‚Äù ‚Äî Regalo di Natale</title>
  <meta name="description" content="Un regalo a tema natalizio ispirato al romanzo di viaggio sudamericano ‚ÄúLa Grande C‚Äù." />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'%3E%3Ctext y='0.9em' font-size='96'%3E%F0%9F%8E%84%3C/text%3E%3C/svg%3E">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <canvas id="snow" aria-hidden="true"></canvas>

  <header class="topbar">
    <div class="wrap topbar__inner">
      <a class="brand" href="#top" aria-label="Vai all'inizio">
        <span class="brand__badge">C</span>
        <span class="brand__text">La Grande ‚ÄúC‚Äù</span>
      </a>

      <nav class="nav" aria-label="Navigazione principale">
        <a href="#gioco">Gioco</a>
        <a href="#download">Download</a>
        <a href="#musica">Musica</a>
      </nav>

      <button class="ghost" id="toggleSnow" type="button" aria-pressed="false" title="Attiva/Disattiva neve">
        ‚ùÑÔ∏è Neve
      </button>
    </div>
  </header>

  <main id="top">
    <section class="hero">
      <div class="wrap hero__grid">
        <div class="hero__copy">
          <p class="kicker">üéÖ Babbo Natale Segreto ‚Ä¢ Edizione Sudamericana</p>
          <h1>Benvenuto nella <span class="accent">Grande ‚ÄúC‚Äù</span></h1>
          <p class="lead">
            Un mini-sito a tema natalizio ispirato al viaggio e al libro. Per sbloccare i download, completa il gioco:
            <strong>raccogli tutti i timbri</strong> del percorso.
          </p>

          <div class="cta">
            <a class="btn primary" href="#gioco">‚ñ∂ Inizia il gioco</a>
            <a class="btn" href="#download">‚¨áÔ∏è Vai ai download</a>
          </div>

          <div class="hero__chips" aria-label="Contenuti del sito">
            <span class="chip">üó∫Ô∏è Viaggio a ‚ÄúC‚Äù</span>
            <span class="chip">üìñ Libro (EPUB/PDF)</span>
            <span class="chip">üéµ Musica</span>
          </div>
        </div>

        <figure class="hero__cover" aria-label="Copertina del libro">
          <picture>
            <source srcset="./assets/cover.webp" type="image/webp" />
            <img src="./assets/cover.jpg" alt="Copertina del libro La Grande C" loading="eager" />
          </picture>
          <figcaption>Copertina ‚Äî puoi sostituire l'immagine in <code>assets/</code>.</figcaption>
        </figure>
      </div>
    </section>

    <section class="section" id="gioco">
      <div class="wrap">
        <header class="section__head">
          <h2>Il gioco: ‚ÄúPassaporto della Grande C‚Äù</h2>
          <p>
            Rispondi alle domande lungo le tappe. Ogni risposta corretta aggiunge un timbro.
            Alla fine, sblocchi i download del libro e della musica.
          </p>
        </header>

        <div class="game">
          <aside class="panel">
            <div class="panel__head">
              <h3>La rotta</h3>
              <p class="muted">Una ‚ÄúC‚Äù simbolica: pi√π timbri, pi√π sblocco.</p>
            </div>

            <div class="route">
              <svg id="routeSvg" viewBox="0 0 220 260" role="img" aria-label="Percorso a forma di C">
                <defs>
                  <filter id="softShadow" x="-40%" y="-40%" width="180%" height="180%">
                    <feDropShadow dx="0" dy="6" stdDeviation="6" flood-opacity="0.25"/>
                  </filter>
                </defs>

                <path d="M 170 35
                         C 75 25, 45 55, 45 130
                         C 45 205, 80 235, 170 225"
                      class="route__path"/>

                <g id="routeDots" filter="url(#softShadow)"></g>
              </svg>

              <div class="route__legend">
                <div><span class="dot dot--todo"></span> Da fare</div>
                <div><span class="dot dot--done"></span> Completata</div>
                <div><span class="dot dot--now"></span> Attuale</div>
              </div>
            </div>

            <div class="panel__foot">
              <button class="btn small" id="resetGame" type="button">‚Ü∫ Reset</button>
              <span class="muted small">Progressi salvati su questo dispositivo.</span>
            </div>
          </aside>

          <section class="panel panel--main" aria-live="polite">
            <div class="panel__head">
              <h3>Passaporto</h3>
              <p class="muted">Timbri raccolti: <strong><span id="stampsCount">0</span>/<span id="stampsTotal">0</span></strong> ‚Ä¢ Vitamina C: <strong><span id="score">0</span></strong></p>
            </div>

            <div class="passport" id="passport">
              <div class="passport__stamps" id="stamps"></div>
              <div class="passport__card">
                <div class="passport__meta">
                  <span class="badge" id="stopBadge">Tappa</span>
                  <span class="muted" id="stopLabel">‚Äî</span>
                </div>
                <h4 class="passport__title" id="stopTitle">Pronto a partire?</h4>
                <p class="passport__text" id="stopText">Premi ‚ÄúInizia‚Äù per cominciare il viaggio.</p>
              </div>
            </div>

            <div class="quiz" id="quiz">
              <div class="quiz__q">
                <h4 id="question">‚Äî</h4>
                <p class="muted" id="hint" hidden></p>
              </div>

              <div class="quiz__options" id="options"></div>

              <div class="quiz__actions">
                <button class="btn primary" id="startGame" type="button">üéÑ Inizia</button>
                <button class="btn" id="showHint" type="button" disabled>üí° Suggerimento</button>
                <button class="btn" id="nextStop" type="button" disabled>‚û°Ô∏è Prossima tappa</button>
              </div>

              <p class="feedback" id="feedback" role="status" aria-live="polite"></p>
            </div>

            <div class="unlock" id="unlock" hidden>
              <h3>üéÅ Regalo sbloccato!</h3>
              <p>
                Hai chiuso la ‚ÄúC‚Äù. Ora puoi scaricare il libro e ascoltare la musica.
              </p>
              <a class="btn primary" href="#download">Vai ai download ‚¨áÔ∏è</a>
            </div>
          </section>
        </div>
      </div>
    </section>

    <section class="section" id="download">
      <div class="wrap">
        <header class="section__head">
          <h2>Download</h2>
          <p class="muted">
            Qui trovi la <strong>copertina</strong>, il romanzo (<strong>EPUB</strong> e <strong>PDF</strong>) e la
            <strong>colonna sonora</strong>. I link puntano ai file presenti nel repository: basta
            mantenerli nelle cartelle indicate o aggiornare gli URL.
          </p>
        </header>

        <div class="cards">
          <article class="card">
            <h3>üñºÔ∏è Copertina</h3>
            <p class="muted">Scarica il PDF con l'artwork completo.</p>
            <a class="btn primary lockable" id="dlCover" href="./downloads/copertina-libro.pdf" download>
              Scarica copertina
            </a>
            <p class="tiny muted">File atteso: <code>downloads/copertina-libro.pdf</code></p>
          </article>

          <article class="card">
            <h3>üìñ Libro (EPUB)</h3>
            <p class="muted">Formato comodo per e-reader / telefono.</p>
            <a class="btn primary lockable" id="dlEpub" href="./downloads/romanzo-sud-america.epub" download>
              Scarica EPUB
            </a>
            <p class="tiny muted">File atteso: <code>downloads/romanzo-sud-america.epub</code></p>
          </article>

          <article class="card">
            <h3>üìÑ Libro (PDF)</h3>
            <p class="muted">Formato stampabile e condivisibile.</p>
            <a class="btn primary lockable" id="dlPdf" href="./downloads/romanzo-sud-america.pdf" download>
              Scarica PDF
            </a>
            <p class="tiny muted">File atteso: <code>downloads/romanzo-sud-america.pdf</code></p>
          </article>

          <article class="card">
            <h3>üéµ Musica</h3>
            <p class="muted">Colonna sonora del regalo.</p>
            <a class="btn primary lockable" id="dlMusic" href="./media/colonna-sonora.mp3" download>
              Scarica MP3
            </a>
            <p class="tiny muted">File atteso: <code>media/colonna-sonora.mp3</code></p>
          </article>
        </div>

        <div class="note">
          <strong>Nota:</strong> i pulsanti rimangono ‚Äúbloccati‚Äù finch√© non completi il gioco (o finch√© non disattivi il blocco in JS).
        </div>
      </div>
    </section>

    <section class="section" id="musica">
      <div class="wrap">
        <header class="section__head">
          <h2>Ascolta</h2>
          <p class="muted">Player pronto: basta mettere il file in <code>media/</code> o cambiare la sorgente.</p>
        </header>

        <div class="player">
          <audio id="audioPlayer" controls preload="metadata">
            <source src="./media/colonna-sonora.mp3" type="audio/mpeg" />
            Il tuo browser non supporta l'audio HTML5.
          </audio>

          <div class="player__meta">
            <p class="muted">
              Se non senti nulla, probabilmente il file non √® presente.
              Carica <code>media/colonna-sonora.mp3</code> (o aggiorna il percorso).
            </p>
          </div>
        </div>

        <footer class="footer">
          <p class="tiny muted">
            Fatto con ‚ù§Ô∏è, un po' di neve e tanta Vitamina C.
          </p>
        </footer>
      </div>
    </section>
  </main>

  <script src="./game.js"></script>
</body>
</html>
